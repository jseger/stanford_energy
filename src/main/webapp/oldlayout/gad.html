<html>
<head>
<!-- This is the gadget version 1-->
    
 <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-23115839-1']);
  _gaq.push(['_setDomainName', '.energygadget2.appspot.com']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
      <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.js"></script>
      <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/jquery-ui.js"></script>
      
      <script type="text/javascript" src="http://craigsworks.com/projects/qtip/packages/1.0.0-rc3/jquery.qtip-1.0.0-rc3.js"></script>

      <link rel="stylesheet" type="text/css" href="http://code.google.com/css/dev_docs.css"/>
      
      <link type="text/css" href="http://jquery-ui.googlecode.com/svn/tags/latest/themes/base/jquery.ui.all.css" rel="stylesheet" />
      
      <link type="text/css" href="style.css" rel="stylesheet" />
      
   <link type="text/css" href="http://1.energygadget2.appspot.com/nebay_green.css" rel="stylesheet" />
     
      <link type="text/css" href="http://www.quai-aux-vivres.com/jquery/plugins/simpledropdown/css/dropdown.css" rel="stylesheet" />
      
        
            <script src="http://www.quai-aux-vivres.com/jquery/plugins/simpledropdown/js/jquery.simpledropdown.min.js" type="text/javascript"></script>
                
       
            <style type="text/css">


</style>
              
                
                  
      <link rel="stylesheet" href="jqtransform/jqtransformplugin/jqtransform.css" type="text/css" media="all" />
	<link rel="stylesheet" href="jqtransform/demo.css" type="text/css" media="all" />
	
	<script type="text/javascript" src="jqtransform/requiered/jquery.js" ></script>
	<script type="text/javascript" src="jqtransform/jqtransformplugin/jquery.jqtransform.js" ></script>
	<script language="javascript">
		$(function(){
			$('form').jqTransform({imgPath:'jqtransformplugin/img/'});
		});
	</script>
     
      <script type="text/javascript">
      $(document).ready(function() {
      //  $.simpledropdown("#dropdown2, #dropdown3");
      });
      </script>
      
      <script  type="text/javascript">
      
      
      
     // gadgets.util.registerOnLoadHandler(search());
      /**
       * Builds an unordered list from the JSON feed entries.
       * This function is the call-back function for the JSON scripts which
       * executes a Google Base query.
       *
       * @param {JSON} j is the JSON object pulled from the Google Base service.
       */
      function listEntries(j) {
        // Clear any information displayed under the "data" div.
       removeOldResults();
      // alert(JSON.stringify(j.feed.entry));

        // Transform the JSON results into an unordered list of links.
        var ul = document.createElement("ul");
        ul.setAttribute("class",'ww-bot-products products-list');

        for (var i = 0; i < j.feed.entry.length; ++i) {
          var entry = j.feed.entry[i];
          var alturl;
          for (var k = 0; k < entry.link.length; ++k) {

            if (entry.link[k].rel == "alternate") {
              alturl = entry.link[k].href;
              break;
            }
          }
              var li = document.createElement("li");
          var wwbotitem=document.createElement("div");
          var imgwrapper=document.createElement("div");
          var wwbotdesc=document.createElement("div");

          wwbotitem.setAttribute("class",'ww-bot-item');
          //wwbotitem.setAttribute("style",'  font-size:12px;  height:96px;  line-height:14px;   overflow:hidden;  width:220px;');
           
          imgwrapper.setAttribute("class",'img-wrapper');
          wwbotdesc.setAttribute("class",'ww-bot-desc');


          var img=document.createElement("img");
        img.setAttribute("class",'ww-bot-img');
        img.setAttribute("alt",'');

  		if(entry.g$image_link && entry.g$image_link[0]){
        	
        	img.setAttribute("src",entry.g$image_link[0].$t);	
        }
        
       // img.setAttribute("src",entry.g$image_link[0].$t);

        imgwrapper.appendChild(img);

        var title=document.createElement("a");
        title.setAttribute("class",'link-title');
        title.setAttribute("title","More Info");

        var linkText=document.createTextNode((entry.title.$t).substring(0,50)+'...');
        
        title.appendChild(linkText);
        //alert(title.innerText);
        var ratingsinfo=document.createElement("p");
        ratingsinfo.setAttribute("class",'ratings-info');

        var wwshowratings=document.createElement("span");
        wwshowratings.setAttribute("class",'ww-show-ratings');

        var ratingmaskstar45=document.createElement("span");
        ratingmaskstar45.setAttribute("class",'rating-mask star-4-5');

        var wwbotvalue=document.createElement("p");
        wwbotvalue.setAttribute("class",'ww-bot-value');
  
var myUSDPrice=  entry.g$price[0].$t;      
var myDollarPrice = myUSDPrice.replace("usd", " ");
var priceText=document.createTextNode("$ "+myDollarPrice);
        
                              wwbotvalue.appendChild(priceText);

        var wwbotbuy=document.createElement("a");
        wwbotbuy.setAttribute("href",entry.link[0].href);
        wwbotbuy.setAttribute("target",'_blank');
        wwbotbuy.setAttribute("class","");


        var buynow=document.createElement("span");
        var buynowtext=document.createElement("img");
        buynowtext.setAttribute("src","http://content.sears.com/ue/home/shop.gif");
        buynow.appendChild(buynowtext);
        wwbotbuy.appendChild(buynow);

        wwbotdesc.appendChild(title);
        //wwbotdesc.appendChild(ratingsinfo);
        //ratingsinfo.appendChild(wwshowratings);
        //ratingsinfo.appendChild(ratingmaskstar45);
        wwbotdesc.appendChild(wwbotvalue);
        wwbotdesc.appendChild(wwbotbuy);
        //wwbotdesc.appendChild(buynow);
        
        wwbotitem.appendChild(imgwrapper);
        wwbotitem.appendChild(wwbotdesc);
        li.appendChild(wwbotitem)
        //li.appendChild(imgwrapper);
        //li.appendChild(wwbotdesc);
          ul.appendChild(li);
        }
        
      
        document.getElementById("results-content").appendChild(ul);
                        //  if (gadgets && gadgets.window && gadgets.window.adjustHeight) {
                       //         gadgets.window.adjustHeight()
                       //   }
        //alert(document.getElementById("sears-product").innerHTML);
      }

      /**
       * Adds a JSON script element which queries Google Base and calls the
       * call-back function.
       *
       * @param {DOM object} query The form element containing the input parameters
       *     "bq" and "feed".
       */
      function search(query) {
      	//alert("hi");
        // Delete any previous Google Base JSON queries.
        removeOldJSONScriptNodes();
        // Clear any old data to prepare to display the Loading... message.
        removeOldResults();

        // Show a "Loading..." indicator.
        var div = document.getElementById('data');
        var p = document.createElement('p');
        p.appendChild(document.createTextNode('Loading...'));
        div.appendChild(p);

        // Add a script element with the src as the users Google Base query.
        // JSON output is specified by including the alt=json-in-script argument
        // and the callback funtion is also specified as a URI argument.
        var scriptElement = document.createElement("script");
        var searchKeyword;
        if (query && query.bq && query.bq.value!=null && query.bq.value!='' ){
            searchKeyword=query.bq.value;
          }else{
            searchKeyword="Refrigerators";
        }
        
        scriptElement.setAttribute("id", "jsonScript");
        scriptElement.setAttribute("src", "http://www.google.com/base/feeds/snippets" +
              "?bq=[customer id(int):2677551]" +
            escape(searchKeyword) + "&alt=json-in-script&callback=listEntries&max-results=200");
        scriptElement.setAttribute("type", "text/javascript");

        document.documentElement.firstChild.appendChild(scriptElement);
      }

      /**
       * Deletes any old script elements which have been created by previous calls
       * to search().
       */
      function removeOldJSONScriptNodes() {
        var jsonScript = document.getElementById("jsonScript");
        if (jsonScript) {
          jsonScript.parentNode.removeChild(jsonScript);
        }
      }

      /**
       * Deletes pre-existing children of the data div from the page. The data div
       * may contain a "Loading..." message, or the results of a previous query.
       * This old data should be removed before displaying new data.
       */
      function removeOldResults() {
        var div = document.getElementById("results-content");
        if (div.firstChild) {
          div.removeChild(div.firstChild);
        }
        var div1 = document.getElementById("data");
        if (div1.firstChild) {
          div1.removeChild(div1.firstChild);
        }
      }



  


function compute(){

	var state=document.getElementById("stateDD").value;
	var refVol=document.getElementById("refVolDD").value;
	var modelYear=document.getElementById("modelYearDD").value;
	var refAngle=document.getElementById("refAngleDD").value;
	var feature1Val=document.getElementById("feature1DD").value;
	var feature2Val="";//document.getElementById("feature2DD").value;
	var energyStarVal=document.getElementById("energyStarDD").value;
	
	
    var compserverurl=window.location+"";
    var servurl=compserverurl.replace("/gad.html","");
	//alert(state+refVol+modelYear+refAngle);

	var strURL=servurl+"GetEnergyData?state="+state+"&refType="+refAngle+"&manufactureYear="+modelYear+"&energyStarVal="+energyStarVal+"&feature1Val="+feature1Val+"&feature2Val="+feature2Val+"&tvol="+refVol+"&respFormat=json";
	
	//alert(strURL);
	//makeJSONRequest(strURL,afterCompute);

	$.ajax({
	    cache: false,
	    contentType: 'text/xml',
	    
	    dataType: 'json',
	    processData: false,
	    type: 'GET',
	    url: strURL,
	    success: function(data, textStatus, XMLHttpRequest) {
	    	//alert(data.version);
	      afterCompute(data);
	    },
	    error: function(XMLHttpRequest, textStatus, errorThrown) {
	        alert("errortext msg :  "+textStatus);
	        alert("errortext msg :  "+errorThrown);
	        //debugger;
	    }
	}); 
	



}
function afterCompute(response){
				
		        //alert(document.getElementById("kWhPerYear").innerHTML);
				document.getElementById("kWhPerYear").innerHTML=response.feed.entry;
				
			}
			
function aftercallprocess(state,refVol,modelYear,refAngle) {
							alert("after call");
				
							

						}
						
						
function makeJSONRequest(reqURL,response) {    
      var params = {};
    //  params[gadgets.io.RequestParameters.CONTENT_TYPE] = gadgets.io.ContentType.JSON;
      // This URL returns a JSON-encoded string that represents a JavaScript object
     
     // gadgets.io.makeRequest(reqURL, response, params);
    }	
						
						

</script>
<style>
body {
background: #528538 url('body_bg_green.jpg') 0 0 repeat-x;
}

</style>
	
		
		
		
  </head>
  <body onload="search();compute();">
    
  
    <div id="data"></div>


		<div class="ww-bot-outer" >
			<div class="ww-bot-inner">
				<div class="ww-bot-header group">
					<span class="header-img"></span>
				<!-- 	<input id="s" class="keywords" type="text"/>  -->
			<!--		<select class="department"></select> -->
				<a class="search button white-gradient" href="#"><span data-lang="search">Search</span></a> 
					<div style="display:none;" class="ww-highlevel ww-search-activity">
						<div class="ww-hold-inner">
							<strong data-lang="typingPrefix">Not so fast...</strong>
							<p><span class="changed" id="changedBy"></span>&nbsp;<span data-lang="typingSuffix">is trying to find something...<span></p>
						</div>
					</div>
					<div class="header-right">
						<div class="ww-settings-hook">
							
							<div class="settings-outer" style="display:none;">
								<div class="settings-inner">
								
								</div>
							</div>
						</div>
					</div>
				</div>
				<div id="master-box" class="group">
				
					<div id="active-users">
				<form class="jqtransform" onSubmit="return false"  style="margin: 10px 40px 10px 20px;">			
						<div class="rowElem1"><label>Energy Saving Calculator</label></div>
<br><br>						
					<div class="rowElem">
			<label>Select State       :    </label>	
						   <select id="stateDD" class="department" onchange="compute();">

 <option value="10.79" >	Alabama	</option>
 <option value="16.42" >	Alaska	</option>
 <option value="11.12" >	Arizona	</option>
 <option value="8.82" >	Arkansas	</option>
 <option value="15.31" >	California	</option>
 <option value="11.25" >	Colorado	</option>
 <option value="19.29" >	Connecticut	</option>
 <option value="13.73" >	Delaware	</option>
 <option value="13.78" >	District of Columbia	</option>
 <option value="11.44" >	Florida	</option>
 <option value="10.3" >	Georgia	</option>
 <option value="27.85" >	Hawaii	</option>
 <option value="8" >	Idaho	</option>
 <option value="11.53" >	Illinois	</option>
 <option value="9.45" >	Indiana	</option>
 <option value="10.42" >	Iowa	</option>
 <option value="9.97" >	Kansas	</option>
 <option value="8.47" >	Kentucky	</option>
 <option value="8.93" >	Louisiana	</option>
 <option value="15.7" >	Maine	</option>
 <option value="14.7" >	Maryland	</option>
 <option value="15.23" >	Massachusetts	</option>
 <option value="12.52" >	Michigan	</option>
 <option value="10.4" >	Minnesota	</option>
 <option value="9.93" >	Mississippi	</option>
 <option value="9.22" >	Missouri	</option>
 <option value="9.11" >	Montana	</option>
 <option value="9.03" >	Nebraska	</option>
 <option value="12.43" >	Nevada	</option>
 <option value="16.19" >	New Hampshire	</option>
 <option value="16.66" >	New Jersey	</option>
 <option value="10.69" >	New Mexico	</option>
 <option value="18.74" >	New York	</option>
 <option value="10.25" >	North Carolina	</option>
 <option value="8.1" >	North Dakota	</option>
 <option value="11.33" >	Ohio	</option>
 <option value="9.11" >	Oklahoma	</option>
 <option value="8.83" >	Oregon	</option>
 <option value="12.83" >	Pennsylvania	</option>
 <option value="15.96" >	Rhode Island	</option>
 <option value="10.47" >	South Carolina	</option>
 <option value="8.86" >	South Dakota	</option>
 <option value="9.13" >	Tennessee	</option>
 <option value="11.63" >	Texas	</option>
 <option value="8.85" >	Utah	</option>
 <option value="15.48" >	Vermont	</option>
 <option value="10.56" >	Virginia	</option>
 <option value="7.93" >	Washington	</option>
 <option value="8.69" >	West Virginia	</option>
 <option value="12.53" >	Wisconsin	</option>
 <option value="8.73" >	Wyoming	</option>

                    </select></div>
						<br><br>
									 <div class="rowElem">
			<label> Refrigerator Type:</label>          
                    <select id="refAngleDD" class="department"   onchange="compute();">
								<option value="Bottom">Bottom</option>          
								<option value="Chest">Chest</option>           
								<option value="Chest-Freezer">Chest-Freezer</option>   
								<option value="Side">Side</option>            
								<option value="Single">Single</option>          
								<option value="Top">Top</option> 
                    </select></div>  
						 		       <br><br>
                 
								<div class="rowElem">
			<label>Approx Model Year:</label>	          
                    	<select id="modelYearDD" class="department"  onchange="compute();">
                                       			        <option value="">Please Select</option>    	
                       									<option value="1980-1989">1980-1989</option>    
														<option value="1990-1992">1990-1992</option>    
														<option value="1993-1996">1993-1996</option>    
														<option value="1997-2000">1997-2000</option>    
														<option value="2001-2005">2001-2005</option>    
														<option value="2006-2011">2006-2011</option>    
														<option value="Before 1980">Before 1980</option>

                    </select></div>
<br><br>						
									 <div class="rowElem">
			<label>Size:</label>
                    <select  id="refVolDD" class="department" onchange="compute();">
                             <option value="">Please Select</option> 
                                <option value="16.5-18.9">16.5-18.9</option>  	
								<option value="19-21.4">19-21.4</option>   			
								<option value="21.5-24.4">21.5-24.4</option> 		
								<option value="25.5 & More">25.5 & More</option>
								<option value="7.5-16.4">7.5-16.4</option> 			
								<option value="Below 7.5">Below 7.5</option> 		

                    </select>
                          </div>           
                  
<br><br>                 
                 
                 
                 
                <div class="rowElem">
								<label> Icemaker:</label>          
                   				 <select id="feature1DD" class="department" onchange="compute();">
	                       		<option value="">Please Select</option>	<option value="without icemaker">without icemaker</option>          
									<option value="with icemaker">with icemaker</option>           
								
                    			</select>
               </div> 
<!--                <div class="rowElem">
								<label> Feature2:</label>          
                   				 <select id="feature2DD" class="department">
	                       		<option value="">Please Select</option>	<option value="manual/partial">manual/partial</option>          
									<option value="automatic defrost">automatic defrost</option>           
								
                    			</select>
               </div> -->   
        <br><br>         <div class="rowElem">
								<label> EnergyStar:</label>          
                   				<select id="energyStarDD" class="department" onchange="compute();">
	                       		<option value="">Please Select</option> 
	                       			<option value="1">Yes</option>          
									<option value="0">No</option>           
								
                    			</select>
               </div>  
                
                
                
                
                
                
                
                
                
                
                
                 
                <!--  
				    <div class="rowElem">
						<label> </label>          
              		</div>  
                 	<div class="rowElem">
                    <span class=" department search button white-gradient"  onclick="compute();" data-lang="test">Compute</span>
                    </div>
					<div class="rowElem">
						<label> </label>          
              		</div> 	 -->
              		<div class="rowElem">	<h5 class="about" id="kWhPerYear"><strong></strong></h5></div> 
						
				<!-- 	<div class="department search button white-gradient font-size=16px " id="kWhPerYear">
						
						</div>-->
						
						
							    
										
					
					
					
					
					
					
					
					
					
					
					
							
						
					</form></div>
					<div id="main-view">
						<ul class="main-tabs">
							<li class="first"><a class="active" href="#" title="Matching Results" id="tab-results">Search Results</a></li>
							<li><a href="#" title="Favorites" id="tab-favorites"><span class="counter">0</span> Items in Your List</a></li>
						</ul>
						<div class="ww-bot-overflow ww-bot-product-grid" id="results-content">
							<p class="no-results-found no-prods" style="display:none;" data-lang="noresults">No results found</p>
							<ul id="productContainer" class="ww-bot-products products-list"></ul>
						</div>
						<div class="ww-bot-overflow ww-bot-product-grid" style="display:none;" id="favorites-content">
							<p class="no-results-found no-favs" style="display:none;" data-lang="noresults">No results found</p>
							<ul id="favsContainer" class="ww-bot-products products-list"></ul>
						</div>
					</div>
					<div class="ww-bot-product-view" style="display:none;">
						<ul class="ww-bot-top-tabs">
							<li class="first"><a class="return" href="#" data-lang="back">Results</a></li>
							<li class="second"><a class="active tab details" href="#" title="details" data-lang="details">Product Details</a></li>
							<li><a class="tab reviews" title="reviews" href="#" data-lang="reviews">User Reviews</a></li>
						</ul>
						<div class="ww-bot-overflow">
							<div class="ww-bot-details">
								<div class="ww-fixed-focus">
									<div class="img-wrapper">
										<img class="ww-bot-img" src="images/empty.png" alt="Product Image"/>
									</div>
									<a class="ww-bot-buy button white-gradient" href="#" target="_blank" data-lang="title:buy" title="Buy Now"><span data-lang="buy">Buy Now</span></a>
								</div>
								<div class="ww-bot-desc">
									<a class="ww-bot-linkto link-title" href="#" title="More Info" target="_blank">Product Title</a>
									<p class="ratings-info">
										<span class="ww-show-ratings">Star Rating<span class="rating-mask"></span></span>
									</p>
									<p class="ww-bot-value">unknown price</p>
									<div class="ww-bot-extras tab-content details">
										<p>Style support once desc samples are included</p>
									</div>
									<div class="ww-bot-reviews tab-content reviews" style="display:none;"></div>
									<div class="ww-bot-related tab-content related" style="display:none;">
										<ul class="ww-bot-products related-products"></ul>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<p style="display:none;" class="ww-highlevel status-indicator" data-lang="loading">Loading...</p>
				<div class="ww-bot-footer">
					<ul class="pagination-control">
						<li class="prev-holder"><a class="prev" href="#" data-lang="prev">Prev</a></li>
						<li class="next-holder"><a class="next" href="#" data-lang="next">Next</a></li>
						<li class="page-holder"><span class="page-number">0</span> of <span class="total-pages">0</span></li>
					</ul>
					<p><a href="" target="_blank">Feedback</a></p>
					<p class="ww-bot-title"><a href="" target="_blank"> </a></p>
				</div>
			</div>
		</div>



  </body>
  
  </html>